import{d as A,K as O,b as P,e as B,a as p,f as F,g as H,h as b,j as $,k as U,l as Y}from"./index-jiDHHWpj.js";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const D=new WeakMap,I=(e,s,t,o=0,r=!1)=>{D.has(e)!==t&&(t?G(e,s,o,r):W(e,s))},q=e=>e===e.getRootNode().activeElement,G=(e,s,t,o=!1)=>{const r=s.parentNode,n=s.cloneNode(!1);n.classList.add("cloned-input"),n.tabIndex=-1,o&&(n.disabled=!0),r.appendChild(n),D.set(e,n);const a=e.ownerDocument.dir==="rtl"?9999:-9999;e.style.pointerEvents="none",s.style.transform="translate3d(".concat(a,"px,").concat(t,"px,0) scale(0)")},W=(e,s)=>{const t=D.get(e);t&&(D.delete(e),t.remove()),e.style.pointerEvents="",s.style.transform=""},N=50,j=(e,s,t)=>{if(!t||!s)return()=>{};const o=a=>{q(s)&&I(e,s,a)},r=()=>I(e,s,!1),n=()=>o(!0),c=()=>o(!1);return P(t,"ionScrollStart",n),P(t,"ionScrollEnd",c),s.addEventListener("blur",r),()=>{B(t,"ionScrollStart",n),B(t,"ionScrollEnd",c),s.removeEventListener("blur",r)}},T="input, textarea, [no-blur], [contenteditable]",z=()=>{let e=!0,s=!1;const t=document,o=()=>{s=!0},r=()=>{e=!0},n=c=>{if(s){s=!1;return}const a=t.activeElement;if(!a||a.matches(T))return;const f=c.target;f!==a&&(f.matches(T)||f.closest(T)||(e=!1,setTimeout(()=>{e||a.blur()},50)))};return P(t,"ionScrollStart",o),t.addEventListener("focusin",r,!0),t.addEventListener("touchend",n,!1),()=>{B(t,"ionScrollStart",o,!0),t.removeEventListener("focusin",r,!0),t.removeEventListener("touchend",n,!1)}},J=.3,Q=(e,s,t,o)=>{var r;const n=(r=e.closest("ion-item,[ion-item]"))!==null&&r!==void 0?r:e;return V(n.getBoundingClientRect(),s.getBoundingClientRect(),t,o)},V=(e,s,t,o)=>{const r=e.top,n=e.bottom,c=s.top,a=Math.min(s.bottom,o-t),f=c+15,u=a-N-n,d=f-r,S=Math.round(u<0?-u:d>0?-d:0),v=Math.min(S,r-c),i=Math.abs(v)/J,h=Math.min(400,Math.max(150,i));return{scrollAmount:v,scrollDuration:h,scrollPadding:t,inputSafeY:-(r-f)+4}},R="$ionPaddingTimer",M=(e,s,t)=>{const o=e[R];o&&clearTimeout(o),s>0?e.style.setProperty("--keyboard-offset","".concat(s,"px")):e[R]=setTimeout(()=>{e.style.setProperty("--keyboard-offset","0px"),t&&t()},120)},_=(e,s,t)=>{const o=()=>{s&&M(s,0,t)};e.addEventListener("focusout",o,{once:!0})};let g=0;const K="data-ionic-skip-scroll-assist",X=(e,s,t,o,r,n,c,a=!1)=>{const f=n&&(c===void 0||c.mode===H.None);let l=!1;const u=b!==void 0?b.innerHeight:0,d=y=>{if(l===!1){l=!0;return}k(e,s,t,o,y.detail.keyboardHeight,f,a,u,!1)},S=()=>{l=!1,b===null||b===void 0||b.removeEventListener("ionKeyboardDidShow",d),e.removeEventListener("focusout",S)},v=async()=>{if(s.hasAttribute(K)){s.removeAttribute(K);return}k(e,s,t,o,r,f,a,u),b===null||b===void 0||b.addEventListener("ionKeyboardDidShow",d),e.addEventListener("focusout",S)};return e.addEventListener("focusin",v),()=>{e.removeEventListener("focusin",v),b===null||b===void 0||b.removeEventListener("ionKeyboardDidShow",d),e.removeEventListener("focusout",S)}},C=e=>{var s;if(document.activeElement===e)return;const t=e.getAttribute("id"),o=e.closest('label[for="'.concat(t,'"]')),r=(s=document.activeElement)===null||s===void 0?void 0:s.closest('label[for="'.concat(t,'"]'));o!==null&&o===r||(e.setAttribute(K,"true"),e.focus())},k=async(e,s,t,o,r,n,c=!1,a=0,f=!0)=>{if(!t&&!o)return;const l=Q(e,t||o,r,a);if(t&&Math.abs(l.scrollAmount)<4){C(s),n&&t!==null&&(M(t,g),_(s,t,()=>g=0));return}if(I(e,s,!0,l.inputSafeY,c),C(s),$(()=>e.click()),n&&t&&(g=l.scrollPadding,M(t,g)),typeof window<"u"){let u;const d=async()=>{u!==void 0&&clearTimeout(u),window.removeEventListener("ionKeyboardDidShow",S),window.removeEventListener("ionKeyboardDidShow",d),t&&await Y(t,0,l.scrollAmount,l.scrollDuration),I(e,s,!1,l.inputSafeY),C(s),n&&_(s,t,()=>g=0)},S=()=>{window.removeEventListener("ionKeyboardDidShow",S),window.addEventListener("ionKeyboardDidShow",d)};if(t){const v=await U(t),y=v.scrollHeight-v.clientHeight;if(f&&l.scrollAmount>y-v.scrollTop){s.type==="password"?(l.scrollAmount+=N,window.addEventListener("ionKeyboardDidShow",S)):window.addEventListener("ionKeyboardDidShow",d),u=setTimeout(d,1e3);return}}d()}},Z=!0,te=async(e,s)=>{if(A===void 0)return;const t=s==="ios",o=s==="android",r=e.getNumber("keyboardHeight",290),n=e.getBoolean("scrollAssist",!0),c=e.getBoolean("hideCaretOnScroll",t),a=e.getBoolean("inputBlurring",!1),f=e.getBoolean("scrollPadding",!0),l=Array.from(A.querySelectorAll("ion-input, ion-textarea")),u=new WeakMap,d=new WeakMap,S=await O.getResizeMode(),v=async i=>{await new Promise(w=>p(i,w));const h=i.shadowRoot||i,L=h.querySelector("input")||h.querySelector("textarea"),m=F(i),x=m?null:i.closest("ion-footer");if(!L)return;if(m&&c&&!u.has(i)){const w=j(i,L,m);u.set(i,w)}if(!(L.type==="date"||L.type==="datetime-local")&&(m||x)&&n&&!d.has(i)){const w=X(i,L,m,x,r,f,S,o);d.set(i,w)}},y=i=>{if(c){const h=u.get(i);h&&h(),u.delete(i)}if(n){const h=d.get(i);h&&h(),d.delete(i)}};a&&Z&&z();for(const i of l)v(i);A.addEventListener("ionInputDidLoad",i=>{v(i.detail)}),A.addEventListener("ionInputDidUnload",i=>{y(i.detail)})};export{te as startInputShims};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtc2hpbXMtQlNmc0p2ZmIuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AaW9uaWMrY29yZUA4LjcuMTEvbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2NvbXBvbmVudHMvaW5wdXQtc2hpbXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHcgYXMgd2luLCBkIGFzIGRvYyB9IGZyb20gJy4vaW5kZXg5LmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0U2Nyb2xsRWxlbWVudCwgYyBhcyBzY3JvbGxCeVBvaW50LCBhIGFzIGZpbmRDbG9zZXN0SW9uQ29udGVudCB9IGZyb20gJy4vaW5kZXg4LmpzJztcbmltcG9ydCB7IGEgYXMgYWRkRXZlbnRMaXN0ZW5lciwgYiBhcyByZW1vdmVFdmVudExpc3RlbmVyLCByIGFzIHJhZiwgYyBhcyBjb21wb25lbnRPblJlYWR5IH0gZnJvbSAnLi9oZWxwZXJzLmpzJztcbmltcG9ydCB7IGEgYXMgS2V5Ym9hcmRSZXNpemUsIEsgYXMgS2V5Ym9hcmQgfSBmcm9tICcuL2tleWJvYXJkMi5qcyc7XG5cbmNvbnN0IGNsb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlbG9jYXRlSW5wdXQgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZFJlbG9jYXRlLCBpbnB1dFJlbGF0aXZlWSA9IDAsIGRpc2FibGVkQ2xvbmVkSW5wdXQgPSBmYWxzZSkgPT4ge1xuICAgIGlmIChjbG9uZU1hcC5oYXMoY29tcG9uZW50RWwpID09PSBzaG91bGRSZWxvY2F0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzaG91bGRSZWxvY2F0ZSkge1xuICAgICAgICBhZGRDbG9uZShjb21wb25lbnRFbCwgaW5wdXRFbCwgaW5wdXRSZWxhdGl2ZVksIGRpc2FibGVkQ2xvbmVkSW5wdXQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVtb3ZlQ2xvbmUoY29tcG9uZW50RWwsIGlucHV0RWwpO1xuICAgIH1cbn07XG5jb25zdCBpc0ZvY3VzZWQgPSAoaW5wdXQpID0+IHtcbiAgICAvKipcbiAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTm9kZS9nZXRSb290Tm9kZVxuICAgICAqIENhbGxpbmcgZ2V0Um9vdE5vZGUgb24gYW4gZWxlbWVudCBpbiBzdGFuZGFyZCB3ZWIgcGFnZSB3aWxsIHJldHVybiBIVE1MRG9jdW1lbnQuXG4gICAgICogQ2FsbGluZyBnZXRSb290Tm9kZSBvbiBhbiBlbGVtZW50IGluc2lkZSBvZiB0aGUgU2hhZG93IERPTSB3aWxsIHJldHVybiB0aGUgYXNzb2NpYXRlZCBTaGFkb3dSb290LlxuICAgICAqIENhbGxpbmcgZ2V0Um9vdE5vZGUgb24gYW4gZWxlbWVudCB0aGF0IGlzIG5vdCBhdHRhY2hlZCB0byBhIGRvY3VtZW50L3NoYWRvdyB0cmVlIHdpbGwgcmV0dXJuXG4gICAgICogdGhlIHJvb3Qgb2YgdGhlIERPTSB0cmVlIGl0IGJlbG9uZ3MgdG8uXG4gICAgICogaXNGb2N1c2VkIGlzIHVzZWQgZm9yIHRoZSBoaWRlLWNhcmV0IHV0aWxpdHkgd2hpY2ggb25seSBjb25zaWRlcnMgaW5wdXQvdGV4dGFyZWEgZWxlbWVudHNcbiAgICAgKiB0aGF0IGFyZSBwcmVzZW50IGluIHRoZSBET00sIHNvIHdlIGRvbid0IHNldCB0eXBlcyBmb3IgdGhhdCBmaW5hbCBjYXNlIHNpbmNlIGl0IGRvZXMgbm90IGFwcGx5LlxuICAgICAqL1xuICAgIHJldHVybiBpbnB1dCA9PT0gaW5wdXQuZ2V0Um9vdE5vZGUoKS5hY3RpdmVFbGVtZW50O1xufTtcbmNvbnN0IGFkZENsb25lID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBpbnB1dFJlbGF0aXZlWSwgZGlzYWJsZWRDbG9uZWRJbnB1dCA9IGZhbHNlKSA9PiB7XG4gICAgLy8gdGhpcyBhbGxvd3MgZm9yIHRoZSBhY3R1YWwgaW5wdXQgdG8gcmVjZWl2ZSB0aGUgZm9jdXMgZnJvbVxuICAgIC8vIHRoZSB1c2VyJ3MgdG91Y2ggZXZlbnQsIGJ1dCBiZWZvcmUgaXQgcmVjZWl2ZXMgZm9jdXMsIGl0XG4gICAgLy8gbW92ZXMgdGhlIGFjdHVhbCBpbnB1dCB0byBhIGxvY2F0aW9uIHRoYXQgd2lsbCBub3Qgc2NyZXdcbiAgICAvLyB1cCB0aGUgYXBwJ3MgbGF5b3V0LCBhbmQgZG9lcyBub3QgYWxsb3cgdGhlIG5hdGl2ZSBicm93c2VyXG4gICAgLy8gdG8gYXR0ZW1wdCB0byBzY3JvbGwgdGhlIGlucHV0IGludG8gcGxhY2UgKG1lc3NpbmcgdXAgaGVhZGVycy9mb290ZXJzKVxuICAgIC8vIHRoZSBjbG9uZWQgaW5wdXQgZmlsbHMgdGhlIGFyZWEgb2Ygd2hlcmUgbmF0aXZlIGlucHV0IHNob3VsZCBiZVxuICAgIC8vIHdoaWxlIHRoZSBuYXRpdmUgaW5wdXQgZmFrZXMgb3V0IHRoZSBicm93c2VyIGJ5IHJlbG9jYXRpbmcgaXRzZWxmXG4gICAgLy8gYmVmb3JlIGl0IHJlY2VpdmVzIHRoZSBhY3R1YWwgZm9jdXMgZXZlbnRcbiAgICAvLyBXZSBoaWRlIHRoZSBmb2N1c2VkIGlucHV0ICh3aXRoIHRoZSB2aXNpYmxlIGNhcmV0KSBpbnZpc2libGUgYnkgbWFraW5nIGl0IHNjYWxlKDApLFxuICAgIGNvbnN0IHBhcmVudEVsID0gaW5wdXRFbC5wYXJlbnROb2RlO1xuICAgIC8vIERPTSBXUklURVNcbiAgICBjb25zdCBjbG9uZWRFbCA9IGlucHV0RWwuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICBjbG9uZWRFbC5jbGFzc0xpc3QuYWRkKCdjbG9uZWQtaW5wdXQnKTtcbiAgICBjbG9uZWRFbC50YWJJbmRleCA9IC0xO1xuICAgIC8qKlxuICAgICAqIE1ha2luZyB0aGUgY2xvbmVkIGlucHV0IGRpc2FibGVkIHByZXZlbnRzXG4gICAgICogQ2hyb21lIGZvciBBbmRyb2lkIGZyb20gc3RpbGwgc2Nyb2xsaW5nXG4gICAgICogdGhlIGVudGlyZSBwYWdlIHNpbmNlIHRoaXMgY2xvbmVkIGlucHV0XG4gICAgICogd2lsbCBicmllZmx5IGJlIGhpZGRlbiBieSB0aGUga2V5Ym9hcmRcbiAgICAgKiBldmVuIHRob3VnaCBpdCBpcyBub3QgZm9jdXNlZC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgbm90IG5lZWRlZCBvbiBpT1MuIFdoaWxlIHRoaXNcbiAgICAgKiBkb2VzIG5vdCBjYXVzZSBmdW5jdGlvbmFsIGlzc3VlcyBvbiBpT1MsXG4gICAgICogdGhlIGlucHV0IHN0aWxsIGFwcGVhcnMgc2xpZ2h0bHkgZGltbWVkIGV2ZW5cbiAgICAgKiBpZiB3ZSBzZXQgb3BhY2l0eTogMS5cbiAgICAgKi9cbiAgICBpZiAoZGlzYWJsZWRDbG9uZWRJbnB1dCkge1xuICAgICAgICBjbG9uZWRFbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIHBhcmVudEVsLmFwcGVuZENoaWxkKGNsb25lZEVsKTtcbiAgICBjbG9uZU1hcC5zZXQoY29tcG9uZW50RWwsIGNsb25lZEVsKTtcbiAgICBjb25zdCBkb2MgPSBjb21wb25lbnRFbC5vd25lckRvY3VtZW50O1xuICAgIGNvbnN0IHR4ID0gZG9jLmRpciA9PT0gJ3J0bCcgPyA5OTk5IDogLTk5OTk7XG4gICAgY29tcG9uZW50RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICBpbnB1dEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3R4fXB4LCR7aW5wdXRSZWxhdGl2ZVl9cHgsMCkgc2NhbGUoMClgO1xufTtcbmNvbnN0IHJlbW92ZUNsb25lID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsKSA9PiB7XG4gICAgY29uc3QgY2xvbmUgPSBjbG9uZU1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgIGlmIChjbG9uZSkge1xuICAgICAgICBjbG9uZU1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgICAgICBjbG9uZS5yZW1vdmUoKTtcbiAgICB9XG4gICAgY29tcG9uZW50RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICcnO1xuICAgIGlucHV0RWwuc3R5bGUudHJhbnNmb3JtID0gJyc7XG59O1xuLyoqXG4gKiBGYWN0b3JpbmcgaW4gNTBweCBnaXZlcyB1cyBzb21lIHJvb21cbiAqIGluIGNhc2UgdGhlIGtleWJvYXJkIHNob3dzIHBhc3N3b3JkL2F1dG9maWxsIGJhcnNcbiAqIGFzeW5jaHJvbm91c2x5LlxuICovXG5jb25zdCBTQ1JPTExfQU1PVU5UX1BBRERJTkcgPSA1MDtcblxuY29uc3QgZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsKSA9PiB7XG4gICAgaWYgKCFzY3JvbGxFbCB8fCAhaW5wdXRFbCkge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY3JvbGxIaWRlQ2FyZXQgPSAoc2hvdWxkSGlkZUNhcmV0KSA9PiB7XG4gICAgICAgIGlmIChpc0ZvY3VzZWQoaW5wdXRFbCkpIHtcbiAgICAgICAgICAgIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZEhpZGVDYXJldCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9uQmx1ciA9ICgpID0+IHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIGZhbHNlKTtcbiAgICBjb25zdCBoaWRlQ2FyZXQgPSAoKSA9PiBzY3JvbGxIaWRlQ2FyZXQodHJ1ZSk7XG4gICAgY29uc3Qgc2hvd0NhcmV0ID0gKCkgPT4gc2Nyb2xsSGlkZUNhcmV0KGZhbHNlKTtcbiAgICBhZGRFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsU3RhcnQnLCBoaWRlQ2FyZXQpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxFbmQnLCBzaG93Q2FyZXQpO1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQmx1cik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbFN0YXJ0JywgaGlkZUNhcmV0KTtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbEVuZCcsIHNob3dDYXJldCk7XG4gICAgICAgIGlucHV0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQmx1cik7XG4gICAgfTtcbn07XG5cbmNvbnN0IFNLSVBfU0VMRUNUT1IgPSAnaW5wdXQsIHRleHRhcmVhLCBbbm8tYmx1cl0sIFtjb250ZW50ZWRpdGFibGVdJztcbmNvbnN0IGVuYWJsZUlucHV0Qmx1cnJpbmcgPSAoKSA9PiB7XG4gICAgbGV0IGZvY3VzZWQgPSB0cnVlO1xuICAgIGxldCBkaWRTY3JvbGwgPSBmYWxzZTtcbiAgICBjb25zdCBkb2MgPSBkb2N1bWVudDtcbiAgICBjb25zdCBvblNjcm9sbCA9ICgpID0+IHtcbiAgICAgICAgZGlkU2Nyb2xsID0gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IG9uRm9jdXNpbiA9ICgpID0+IHtcbiAgICAgICAgZm9jdXNlZCA9IHRydWU7XG4gICAgfTtcbiAgICBjb25zdCBvblRvdWNoZW5kID0gKGV2KSA9PiB7XG4gICAgICAgIC8vIGlmIGFwcCBkaWQgc2Nyb2xsIHJldHVybiBlYXJseVxuICAgICAgICBpZiAoZGlkU2Nyb2xsKSB7XG4gICAgICAgICAgICBkaWRTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhY3RpdmUgPSBkb2MuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBvbmx5IGJsdXIgaWYgdGhlIGFjdGl2ZSBlbGVtZW50IGlzIGEgdGV4dC1pbnB1dCBvciBhIHRleHRhcmVhXG4gICAgICAgIGlmIChhY3RpdmUubWF0Y2hlcyhTS0lQX1NFTEVDVE9SKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSBzZWxlY3RlZCB0YXJnZXQgaXMgdGhlIGFjdGl2ZSBlbGVtZW50LCBkbyBub3QgYmx1clxuICAgICAgICBjb25zdCB0YXBwZWQgPSBldi50YXJnZXQ7XG4gICAgICAgIGlmICh0YXBwZWQgPT09IGFjdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXBwZWQubWF0Y2hlcyhTS0lQX1NFTEVDVE9SKSB8fCB0YXBwZWQuY2xvc2VzdChTS0lQX1NFTEVDVE9SKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gVE9ETyBGVy0yNzk2OiBmaW5kIGEgYmV0dGVyIHdheSwgd2h5IDUwbXM/XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFmb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlLmJsdXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgNTApO1xuICAgIH07XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihkb2MsICdpb25TY3JvbGxTdGFydCcsIG9uU2Nyb2xsKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbiwgdHJ1ZSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaGVuZCwgZmFsc2UpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCwgdHJ1ZSk7XG4gICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luLCB0cnVlKTtcbiAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaGVuZCwgZmFsc2UpO1xuICAgIH07XG59O1xuXG5jb25zdCBTQ1JPTExfQVNTSVNUX1NQRUVEID0gMC4zO1xuY29uc3QgZ2V0U2Nyb2xsRGF0YSA9IChjb21wb25lbnRFbCwgY29udGVudEVsLCBrZXlib2FyZEhlaWdodCwgcGxhdGZvcm1IZWlnaHQpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgaXRlbUVsID0gKF9hID0gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWl0ZW0sW2lvbi1pdGVtXScpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb21wb25lbnRFbDtcbiAgICByZXR1cm4gY2FsY1Njcm9sbERhdGEoaXRlbUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBjb250ZW50RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGtleWJvYXJkSGVpZ2h0LCBwbGF0Zm9ybUhlaWdodCk7XG59O1xuY29uc3QgY2FsY1Njcm9sbERhdGEgPSAoaW5wdXRSZWN0LCBjb250ZW50UmVjdCwga2V5Ym9hcmRIZWlnaHQsIHBsYXRmb3JtSGVpZ2h0KSA9PiB7XG4gICAgLy8gY29tcHV0ZSBpbnB1dCdzIFkgdmFsdWVzIHJlbGF0aXZlIHRvIHRoZSBib2R5XG4gICAgY29uc3QgaW5wdXRUb3AgPSBpbnB1dFJlY3QudG9wO1xuICAgIGNvbnN0IGlucHV0Qm90dG9tID0gaW5wdXRSZWN0LmJvdHRvbTtcbiAgICAvLyBjb21wdXRlIHZpc2libGUgYXJlYVxuICAgIGNvbnN0IHZpc2libGVBcmVhVG9wID0gY29udGVudFJlY3QudG9wO1xuICAgIGNvbnN0IHZpc2libGVBcmVhQm90dG9tID0gTWF0aC5taW4oY29udGVudFJlY3QuYm90dG9tLCBwbGF0Zm9ybUhlaWdodCAtIGtleWJvYXJkSGVpZ2h0KTtcbiAgICAvLyBjb21wdXRlIHNhZmUgYXJlYVxuICAgIGNvbnN0IHNhZmVBcmVhVG9wID0gdmlzaWJsZUFyZWFUb3AgKyAxNTtcbiAgICBjb25zdCBzYWZlQXJlYUJvdHRvbSA9IHZpc2libGVBcmVhQm90dG9tIC0gU0NST0xMX0FNT1VOVF9QQURESU5HO1xuICAgIC8vIGZpZ3VyZSBvdXQgaWYgZWFjaCBlZGdlIG9mIHRoZSBpbnB1dCBpcyB3aXRoaW4gdGhlIHNhZmUgYXJlYVxuICAgIGNvbnN0IGRpc3RhbmNlVG9Cb3R0b20gPSBzYWZlQXJlYUJvdHRvbSAtIGlucHV0Qm90dG9tO1xuICAgIGNvbnN0IGRpc3RhbmNlVG9Ub3AgPSBzYWZlQXJlYVRvcCAtIGlucHV0VG9wO1xuICAgIC8vIGRlc2lyZWRTY3JvbGxBbW91bnQgaXMgdGhlIG5lZ2F0ZWQgZGlzdGFuY2UgdG8gdGhlIHNhZmUgYXJlYSBhY2NvcmRpbmcgdG8gb3VyIGNhbGN1bGF0aW9ucy5cbiAgICBjb25zdCBkZXNpcmVkU2Nyb2xsQW1vdW50ID0gTWF0aC5yb3VuZChkaXN0YW5jZVRvQm90dG9tIDwgMCA/IC1kaXN0YW5jZVRvQm90dG9tIDogZGlzdGFuY2VUb1RvcCA+IDAgPyAtZGlzdGFuY2VUb1RvcCA6IDApO1xuICAgIC8vIG91ciBjYWxjdWxhdGlvbnMgbWFrZSBzb21lIGFzc3VtcHRpb25zIHRoYXQgYXJlbid0IGFsd2F5cyB0cnVlLCBsaWtlIHRoZSBrZXlib2FyZCBiZWluZyBjbG9zZWQgd2hlbiBhbiBpbnB1dFxuICAgIC8vIGdldHMgZm9jdXMsIHNvIG1ha2Ugc3VyZSB3ZSBkb24ndCBzY3JvbGwgdGhlIGlucHV0IGFib3ZlIHRoZSB2aXNpYmxlIGFyZWFcbiAgICBjb25zdCBzY3JvbGxBbW91bnQgPSBNYXRoLm1pbihkZXNpcmVkU2Nyb2xsQW1vdW50LCBpbnB1dFRvcCAtIHZpc2libGVBcmVhVG9wKTtcbiAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguYWJzKHNjcm9sbEFtb3VudCk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBkaXN0YW5jZSAvIFNDUk9MTF9BU1NJU1RfU1BFRUQ7XG4gICAgY29uc3Qgc2Nyb2xsRHVyYXRpb24gPSBNYXRoLm1pbig0MDAsIE1hdGgubWF4KDE1MCwgZHVyYXRpb24pKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzY3JvbGxBbW91bnQsXG4gICAgICAgIHNjcm9sbER1cmF0aW9uLFxuICAgICAgICBzY3JvbGxQYWRkaW5nOiBrZXlib2FyZEhlaWdodCxcbiAgICAgICAgaW5wdXRTYWZlWTogLShpbnB1dFRvcCAtIHNhZmVBcmVhVG9wKSArIDQsXG4gICAgfTtcbn07XG5cbmNvbnN0IFBBRERJTkdfVElNRVJfS0VZID0gJyRpb25QYWRkaW5nVGltZXInO1xuLyoqXG4gKiBTY3JvbGwgcGFkZGluZyBhZGRzIGFkZGl0aW9uYWwgcGFkZGluZyB0byB0aGUgYm90dG9tXG4gKiBvZiBpb24tY29udGVudCBzbyB0aGF0IHRoZXJlIGlzIGVub3VnaCBzY3JvbGwgc3BhY2VcbiAqIGZvciBhbiBpbnB1dCB0byBiZSBzY3JvbGxlZCBhYm92ZSB0aGUga2V5Ym9hcmQuIFRoaXNcbiAqIGlzIG5lZWRlZCBpbiBlbnZpcm9ubWVudHMgd2hlcmUgdGhlIHdlYnZpZXcgZG9lcyBub3RcbiAqIHJlc2l6ZSB3aGVuIHRoZSBrZXlib2FyZCBvcGVucy5cbiAqXG4gKiBFeGFtcGxlOiBJZiBhbiBpbnB1dCBhdCB0aGUgYm90dG9tIG9mIGlvbi1jb250ZW50IGlzXG4gKiBmb2N1c2VkLCB0aGVyZSBpcyBubyBhZGRpdGlvbmFsIHNjcm9sbGluZyBzcGFjZSBiZWxvd1xuICogaXQsIHNvIHRoZSBpbnB1dCBjYW5ub3QgYmUgc2Nyb2xsZWQgYWJvdmUgdGhlIGtleWJvYXJkLlxuICogU2Nyb2xsIHBhZGRpbmcgZml4ZXMgdGhpcyBieSBhZGRpbmcgcGFkZGluZyBlcXVhbCB0byB0aGVcbiAqIGhlaWdodCBvZiB0aGUga2V5Ym9hcmQgdG8gdGhlIGJvdHRvbSBvZiB0aGUgY29udGVudC5cbiAqXG4gKiBDb21tb24gZW52aXJvbm1lbnRzIHdoZXJlIHRoaXMgaXMgbmVlZGVkOlxuICogLSBNb2JpbGUgU2FmYXJpOiBUaGUga2V5Ym9hcmQgb3ZlcmxheXMgdGhlIGNvbnRlbnRcbiAqIC0gQ2FwYWNpdG9yL0NvcmRvdmEgb24gaU9TOiBUaGUga2V5Ym9hcmQgb3ZlcmxheXMgdGhlIGNvbnRlbnRcbiAqIHdoZW4gdGhlIEtleWJvYXJkUmVzaXplIG1vZGUgaXMgc2V0IHRvICdub25lJy5cbiAqL1xuY29uc3Qgc2V0U2Nyb2xsUGFkZGluZyA9IChjb250ZW50RWwsIHBhZGRpbmdBbW91bnQsIGNsZWFyQ2FsbGJhY2spID0+IHtcbiAgICBjb25zdCB0aW1lciA9IGNvbnRlbnRFbFtQQURESU5HX1RJTUVSX0tFWV07XG4gICAgaWYgKHRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgfVxuICAgIGlmIChwYWRkaW5nQW1vdW50ID4gMCkge1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0ta2V5Ym9hcmQtb2Zmc2V0JywgYCR7cGFkZGluZ0Ftb3VudH1weGApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29udGVudEVsW1BBRERJTkdfVElNRVJfS0VZXSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLWtleWJvYXJkLW9mZnNldCcsICcwcHgnKTtcbiAgICAgICAgICAgIGlmIChjbGVhckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAxMjApO1xuICAgIH1cbn07XG4vKipcbiAqIFdoZW4gYW4gaW5wdXQgaXMgYWJvdXQgdG8gYmUgZm9jdXNlZCxcbiAqIHNldCBhIHRpbWVvdXQgdG8gY2xlYXIgYW55IHNjcm9sbCBwYWRkaW5nXG4gKiBvbiB0aGUgY29udGVudC4gTm90ZTogVGhlIGNsZWFyaW5nXG4gKiBpcyBkb25lIG9uIGEgdGltZW91dCBzbyB0aGF0IGlmIHVzZXJzXG4gKiBhcmUgbW92aW5nIGZvY3VzIGZyb20gb25lIGlucHV0IHRvIHRoZSBuZXh0XG4gKiB0aGVuIHJlLWFkZGluZyBzY3JvbGwgcGFkZGluZyB0byB0aGUgbmV3XG4gKiBpbnB1dCB3aXRoIGNhbmNlbCB0aGUgdGltZW91dCB0byBjbGVhciB0aGVcbiAqIHNjcm9sbCBwYWRkaW5nLlxuICovXG5jb25zdCBzZXRDbGVhclNjcm9sbFBhZGRpbmdMaXN0ZW5lciA9IChpbnB1dEVsLCBjb250ZW50RWwsIGRvbmVDYWxsYmFjaykgPT4ge1xuICAgIGNvbnN0IGNsZWFyU2Nyb2xsUGFkZGluZyA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgICAgICAgc2V0U2Nyb2xsUGFkZGluZyhjb250ZW50RWwsIDAsIGRvbmVDYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBjbGVhclNjcm9sbFBhZGRpbmcsIHsgb25jZTogdHJ1ZSB9KTtcbn07XG5cbmxldCBjdXJyZW50UGFkZGluZyA9IDA7XG5jb25zdCBTS0lQX1NDUk9MTF9BU1NJU1QgPSAnZGF0YS1pb25pYy1za2lwLXNjcm9sbC1hc3Npc3QnO1xuY29uc3QgZW5hYmxlU2Nyb2xsQXNzaXN0ID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgZW5hYmxlU2Nyb2xsUGFkZGluZywga2V5Ym9hcmRSZXNpemUsIGRpc2FibGVDbG9uZWRJbnB1dCA9IGZhbHNlKSA9PiB7XG4gICAgLyoqXG4gICAgICogU2Nyb2xsIHBhZGRpbmcgc2hvdWxkIG9ubHkgYmUgYWRkZWQgaWY6XG4gICAgICogMS4gVGhlIGdsb2JhbCBzY3JvbGxQYWRkaW5nIGNvbmZpZyBvcHRpb25cbiAgICAgKiBpcyBzZXQgdG8gdHJ1ZS5cbiAgICAgKiAyLiBUaGUgbmF0aXZlIGtleWJvYXJkIHJlc2l6ZSBtb2RlIGlzIGVpdGhlciBcIm5vbmVcIlxuICAgICAqIChrZXlib2FyZCBvdmVybGF5cyB3ZWJ2aWV3KSBvciB1bmRlZmluZWQgKHJlc2l6ZVxuICAgICAqIGluZm9ybWF0aW9uIHVuYXZhaWxhYmxlKVxuICAgICAqIFJlc2l6ZSBpbmZvIGlzIGF2YWlsYWJsZSBvbiBDYXBhY2l0b3IgNCtcbiAgICAgKi9cbiAgICBjb25zdCBhZGRTY3JvbGxQYWRkaW5nID0gZW5hYmxlU2Nyb2xsUGFkZGluZyAmJiAoa2V5Ym9hcmRSZXNpemUgPT09IHVuZGVmaW5lZCB8fCBrZXlib2FyZFJlc2l6ZS5tb2RlID09PSBLZXlib2FyZFJlc2l6ZS5Ob25lKTtcbiAgICAvKipcbiAgICAgKiBUaGlzIHRyYWNrcyB3aGV0aGVyIG9yIG5vdCB0aGUga2V5Ym9hcmQgaGFzIGJlZW5cbiAgICAgKiBwcmVzZW50ZWQgZm9yIGEgc2luZ2xlIGZvY3VzZWQgdGV4dCBmaWVsZC4gTm90ZVxuICAgICAqIHRoYXQgaXQgZG9lcyBub3QgdHJhY2sgaWYgdGhlIGtleWJvYXJkIGlzIG9wZW5cbiAgICAgKiBpbiBnZW5lcmFsIHN1Y2ggYXMgaWYgdGhlIGtleWJvYXJkIGlzIG9wZW4gZm9yXG4gICAgICogYSBkaWZmZXJlbnQgZm9jdXNlZCB0ZXh0IGZpZWxkLlxuICAgICAqL1xuICAgIGxldCBoYXNLZXlib2FyZEJlZW5QcmVzZW50ZWRGb3JUZXh0RmllbGQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBXaGVuIGFkZGluZyBzY3JvbGwgcGFkZGluZyB3ZSBuZWVkIHRvIGtub3dcbiAgICAgKiBob3cgbXVjaCBvZiB0aGUgdmlld3BvcnQgdGhlIGtleWJvYXJkIG9ic2N1cmVzLlxuICAgICAqIFdlIGRvIHRoaXMgYnkgc3VidHJhY3RpbmcgdGhlIGtleWJvYXJkIGhlaWdodFxuICAgICAqIGZyb20gdGhlIHBsYXRmb3JtIGhlaWdodC5cbiAgICAgKlxuICAgICAqIElmIHdlIGNvbXB1dGUgdGhpcyB2YWx1ZSB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuXG4gICAgICogaW5wdXRzIHRoZW4gdGhlIHdlYnZpZXcgbWF5IGFscmVhZHkgYmUgcmVzaXplZC5cbiAgICAgKiBBdCB0aGlzIHBvaW50LCBgd2luLmlubmVySGVpZ2h0YCBoYXMgYWxyZWFkeSBhY2NvdW50ZWRcbiAgICAgKiBmb3IgdGhlIGtleWJvYXJkIG1lYW5pbmcgd2Ugd291bGQgdGhlbiBzdWJ0cmFjdFxuICAgICAqIHRoZSBrZXlib2FyZCBoZWlnaHQgYWdhaW4uIFRoaXMgd2lsbCByZXN1bHQgaW4gdGhlIGlucHV0XG4gICAgICogYmVpbmcgc2Nyb2xsZWQgbW9yZSB0aGFuIGl0IG5lZWRzIHRvLlxuICAgICAqL1xuICAgIGNvbnN0IHBsYXRmb3JtSGVpZ2h0ID0gd2luICE9PSB1bmRlZmluZWQgPyB3aW4uaW5uZXJIZWlnaHQgOiAwO1xuICAgIC8qKlxuICAgICAqIFNjcm9sbCBhc3Npc3QgaXMgcnVuIHdoZW4gYSB0ZXh0IGZpZWxkXG4gICAgICogaXMgZm9jdXNlZC4gSG93ZXZlciwgaXQgbWF5IG5lZWQgdG9cbiAgICAgKiByZS1ydW4gd2hlbiB0aGUga2V5Ym9hcmQgc2l6ZSBjaGFuZ2VzXG4gICAgICogc3VjaCB0aGF0IHRoZSB0ZXh0IGZpZWxkIGlzIG5vdyBoaWRkZW5cbiAgICAgKiB1bmRlcm5lYXRoIHRoZSBrZXlib2FyZC5cbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJlLXJ1bnMgc2Nyb2xsIGFzc2lzdFxuICAgICAqIHdoZW4gdGhhdCBoYXBwZW5zLlxuICAgICAqXG4gICAgICogT25lIGxpbWl0YXRpb24gb2YgdGhpcyBpcyBvbiBhIHdlYiBicm93c2VyXG4gICAgICogd2hlcmUgbmF0aXZlIGtleWJvYXJkIEFQSXMgZG8gbm90IGhhdmUgY3Jvc3MtYnJvd3NlclxuICAgICAqIHN1cHBvcnQuIGBpb25LZXlib2FyZERpZFNob3dgIHJlbGllcyBvbiB0aGUgVmlzdWFsIFZpZXdwb3J0IEFQSS5cbiAgICAgKiBUaGlzIG1lYW5zIHRoYXQgaWYgdGhlIGtleWJvYXJkIGNoYW5nZXMgYnV0IGRvZXMgbm90IGNoYW5nZVxuICAgICAqIGdlb21ldHJ5LCB0aGVuIHNjcm9sbCBhc3Npc3Qgd2lsbCBub3QgcmUtcnVuIGV2ZW4gaWZcbiAgICAgKiB0aGUgdXNlciBoYXMgc2Nyb2xsZWQgdGhlIHRleHQgZmllbGQgdW5kZXIgdGhlIGtleWJvYXJkLlxuICAgICAqIFRoaXMgaXMgbm90IGEgcHJvYmxlbSB3aGVuIHJ1bm5pbmcgaW4gQ29yZG92YS9DYXBhY2l0b3JcbiAgICAgKiBiZWNhdXNlIGBpb25LZXlib2FyZERpZFNob3dgIHVzZXMgdGhlIG5hdGl2ZSBldmVudHNcbiAgICAgKiB3aGljaCBmaXJlIGV2ZXJ5IHRpbWUgdGhlIGtleWJvYXJkIGNoYW5nZXMuXG4gICAgICovXG4gICAgY29uc3Qga2V5Ym9hcmRTaG93ID0gKGV2KSA9PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aGUga2V5Ym9hcmQgaGFzIG5vdCB5ZXQgYmVlbiBwcmVzZW50ZWRcbiAgICAgICAgICogZm9yIHRoaXMgdGV4dCBmaWVsZCB0aGVuIHRoZSB0ZXh0IGZpZWxkIGhhcyBqdXN0XG4gICAgICAgICAqIHJlY2VpdmVkIGZvY3VzLiBJbiB0aGF0IGNhc2UsIHRoZSBmb2N1c2luIGxpc3RlbmVyXG4gICAgICAgICAqIHdpbGwgcnVuIHNjcm9sbCBhc3Npc3QuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoaGFzS2V5Ym9hcmRCZWVuUHJlc2VudGVkRm9yVGV4dEZpZWxkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaGFzS2V5Ym9hcmRCZWVuUHJlc2VudGVkRm9yVGV4dEZpZWxkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogT3RoZXJ3aXNlLCB0aGUga2V5Ym9hcmQgaGFzIGFscmVhZHkgYmVlbiBwcmVzZW50ZWRcbiAgICAgICAgICogZm9yIHRoZSBmb2N1c2VkIHRleHQgZmllbGQuXG4gICAgICAgICAqIFRoaXMgbWVhbnMgdGhhdCB0aGUga2V5Ym9hcmQgbGlrZWx5IGNoYW5nZWRcbiAgICAgICAgICogZ2VvbWV0cnksIGFuZCB3ZSBuZWVkIHRvIHJlLXJ1biBzY3JvbGwgYXNzaXN0LlxuICAgICAgICAgKiBUaGlzIGNhbiBoYXBwZW4gd2hlbiB0aGUgdXNlciByb3RhdGVzIHRoZWlyIGRldmljZVxuICAgICAgICAgKiBvciB3aGVuIHRoZXkgc3dpdGNoIGtleWJvYXJkcy5cbiAgICAgICAgICpcbiAgICAgICAgICogTWFrZSBzdXJlIHdlIHBhc3MgaW4gdGhlIGNvbXB1dGVkIGtleWJvYXJkIGhlaWdodFxuICAgICAgICAgKiByYXRoZXIgdGhhbiB0aGUgZXN0aW1hdGVkIGtleWJvYXJkIGhlaWdodC5cbiAgICAgICAgICpcbiAgICAgICAgICogU2luY2UgdGhlIGtleWJvYXJkIGlzIGFscmVhZHkgb3BlbiB0aGVuIHdlIGRvIG5vdFxuICAgICAgICAgKiBuZWVkIHRvIHdhaXQgZm9yIHRoZSB3ZWJ2aWV3IHRvIHJlc2l6ZSwgc28gd2UgcGFzc1xuICAgICAgICAgKiBcIndhaXRGb3JSZXNpemU6IGZhbHNlXCIuXG4gICAgICAgICAqL1xuICAgICAgICBqc1NldEZvY3VzKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBldi5kZXRhaWwua2V5Ym9hcmRIZWlnaHQsIGFkZFNjcm9sbFBhZGRpbmcsIGRpc2FibGVDbG9uZWRJbnB1dCwgcGxhdGZvcm1IZWlnaHQsIGZhbHNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBpbnRlcm5hbCBzdGF0ZSB3aGVuIHRoZSB0ZXh0IGZpZWxkIGxvc2VzIGZvY3VzLlxuICAgICAqL1xuICAgIGNvbnN0IGZvY3VzT3V0ID0gKCkgPT4ge1xuICAgICAgICBoYXNLZXlib2FyZEJlZW5QcmVzZW50ZWRGb3JUZXh0RmllbGQgPSBmYWxzZTtcbiAgICAgICAgd2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGtleWJvYXJkU2hvdyk7XG4gICAgICAgIGNvbXBvbmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgZm9jdXNPdXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgaW5wdXQgaXMgYWJvdXQgdG8gcmVjZWl2ZVxuICAgICAqIGZvY3VzLCB3ZSBuZWVkIHRvIG1vdmUgaXQgdG8gcHJldmVudFxuICAgICAqIG1vYmlsZSBTYWZhcmkgZnJvbSBhZGp1c3RpbmcgdGhlIHZpZXdwb3J0LlxuICAgICAqL1xuICAgIGNvbnN0IGZvY3VzSW4gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTY3JvbGwgYXNzaXN0IHNob3VsZCBub3QgcnVuIGFnYWluXG4gICAgICAgICAqIG9uIGlucHV0cyB0aGF0IGhhdmUgYmVlbiBtYW51YWxseVxuICAgICAgICAgKiBmb2N1c2VkIGluc2lkZSBvZiB0aGUgc2Nyb2xsIGFzc2lzdFxuICAgICAgICAgKiBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChpbnB1dEVsLmhhc0F0dHJpYnV0ZShTS0lQX1NDUk9MTF9BU1NJU1QpKSB7XG4gICAgICAgICAgICBpbnB1dEVsLnJlbW92ZUF0dHJpYnV0ZShTS0lQX1NDUk9MTF9BU1NJU1QpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGpzU2V0Rm9jdXMoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0LCBhZGRTY3JvbGxQYWRkaW5nLCBkaXNhYmxlQ2xvbmVkSW5wdXQsIHBsYXRmb3JtSGVpZ2h0KTtcbiAgICAgICAgd2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGtleWJvYXJkU2hvdyk7XG4gICAgICAgIGNvbXBvbmVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgZm9jdXNPdXQpO1xuICAgIH07XG4gICAgY29tcG9uZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGZvY3VzSW4pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGNvbXBvbmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBmb2N1c0luKTtcbiAgICAgICAgd2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGtleWJvYXJkU2hvdyk7XG4gICAgICAgIGNvbXBvbmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgZm9jdXNPdXQpO1xuICAgIH07XG59O1xuLyoqXG4gKiBVc2UgdGhpcyBmdW5jdGlvbiB3aGVuIHlvdSB3YW50IHRvIG1hbnVhbGx5XG4gKiBmb2N1cyBhbiBpbnB1dCBidXQgbm90IGhhdmUgc2Nyb2xsIGFzc2lzdCBydW4gYWdhaW4uXG4gKi9cbmNvbnN0IHNldE1hbnVhbEZvY3VzID0gKGVsKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIC8qKlxuICAgICAqIElmIGVsZW1lbnQgaXMgYWxyZWFkeSBmb2N1c2VkIHRoZW5cbiAgICAgKiBhIG5ldyBmb2N1c2luIGV2ZW50IHdpbGwgbm90IGJlIGRpc3BhdGNoZWRcbiAgICAgKiB0byByZW1vdmUgdGhlIFNLSUxfU0NST0xMX0FTU0lTVCBhdHRyaWJ1dGUuXG4gICAgICovXG4gICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3B0aW1pemF0aW9uIGZvciBzY2VuYXJpb3Mgd2hlcmUgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGVsZW1lbnQgaXMgYSBzaWJsaW5nXG4gICAgICogb2YgdGhlIHRhcmdldCBlbGVtZW50LiBJbiBzdWNoIGNhc2VzLCB3ZSBhdm9pZCBzZXR0aW5nIGBTS0lQX1NDUk9MTF9BU1NJU1RgLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBjcnVjaWFsIGZvciBhY2Nlc3NpYmlsaXR5OiBpbnB1dCBlbGVtZW50cyBjYW4gbm93IGNvbnRhaW4gZm9jdXNhYmxlXG4gICAgICogc2libGluZ3MgKGUuZy4sIGNsZWFyIGJ1dHRvbnMsIHNsb3R0ZWQgZWxlbWVudHMpLiBJZiB3ZSBkaWRuJ3Qgc2tpcCBzZXR0aW5nXG4gICAgICogdGhlIGF0dHJpYnV0ZSBoZXJlLCBzY3JlZW4gcmVhZGVycyB3b3VsZCBiZSB1bmFibGUgdG8gbmF2aWdhdGUgdG8gYW5kIGludGVyYWN0XG4gICAgICogd2l0aCB0aGVzZSBzaWJsaW5nIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogV2l0aG91dCB0aGlzIGNoZWNrLCB3ZSB3b3VsZCBuZWVkIHRvIGNhbGwgYGV2LnN0b3BQcm9wYWdhdGlvbigpYCBvbiB0aGVcbiAgICAgKiAnZm9jdXNpbicgZXZlbnQgb2YgZWFjaCBmb2N1c2FibGUgc2libGluZyB0byBwcmV2ZW50IHRoZSBzY3JvbGwgYXNzaXN0XG4gICAgICogbGlzdGVuZXIgZnJvbSBpbmNvcnJlY3RseSBtb3ZpbmcgZm9jdXMgYmFjayB0byB0aGUgaW5wdXQuIFRoYXQgYXBwcm9hY2hcbiAgICAgKiB3b3VsZCBiZSBsZXNzIG1haW50YWluYWJsZSBhbmQgbW9yZSBlcnJvci1wcm9uZS5cbiAgICAgKi9cbiAgICBjb25zdCBpbnB1dElkID0gZWwuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgIGNvbnN0IGxhYmVsID0gZWwuY2xvc2VzdChgbGFiZWxbZm9yPVwiJHtpbnB1dElkfVwiXWApO1xuICAgIGNvbnN0IGFjdGl2ZUVsTGFiZWwgPSAoX2EgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvc2VzdChgbGFiZWxbZm9yPVwiJHtpbnB1dElkfVwiXWApO1xuICAgIGlmIChsYWJlbCAhPT0gbnVsbCAmJiBsYWJlbCA9PT0gYWN0aXZlRWxMYWJlbCkge1xuICAgICAgICAvLyBJZiB0aGUgbGFiZWwgaXMgdGhlIHNhbWUgYXMgdGhlIGFjdGl2ZSBlbGVtZW50IGxhYmVsLCB0aGVuXG4gICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gc2V0IHRoZSBgU0tJUF9TQ1JPTExfQVNTSVNUYCBhbmQgcmVzZXQgZm9jdXMuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwuc2V0QXR0cmlidXRlKFNLSVBfU0NST0xMX0FTU0lTVCwgJ3RydWUnKTtcbiAgICBlbC5mb2N1cygpO1xufTtcbmNvbnN0IGpzU2V0Rm9jdXMgPSBhc3luYyAoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0LCBlbmFibGVTY3JvbGxQYWRkaW5nLCBkaXNhYmxlQ2xvbmVkSW5wdXQgPSBmYWxzZSwgcGxhdGZvcm1IZWlnaHQgPSAwLCB3YWl0Rm9yUmVzaXplID0gdHJ1ZSkgPT4ge1xuICAgIGlmICghY29udGVudEVsICYmICFmb290ZXJFbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNjcm9sbERhdGEgPSBnZXRTY3JvbGxEYXRhKGNvbXBvbmVudEVsLCAoY29udGVudEVsIHx8IGZvb3RlckVsKSwga2V5Ym9hcmRIZWlnaHQsIHBsYXRmb3JtSGVpZ2h0KTtcbiAgICBpZiAoY29udGVudEVsICYmIE1hdGguYWJzKHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50KSA8IDQpIHtcbiAgICAgICAgLy8gdGhlIHRleHQgaW5wdXQgaXMgaW4gYSBzYWZlIHBvc2l0aW9uIHRoYXQgZG9lc24ndFxuICAgICAgICAvLyByZXF1aXJlIGl0IHRvIGJlIHNjcm9sbGVkIGludG8gdmlldywganVzdCBzZXQgZm9jdXMgbm93XG4gICAgICAgIHNldE1hbnVhbEZvY3VzKGlucHV0RWwpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbiB0aG91Z2ggdGhlIGlucHV0IGRvZXMgbm90IG5lZWRcbiAgICAgICAgICogc2Nyb2xsIGFzc2lzdCwgd2Ugc2hvdWxkIHByZXNlcnZlIHRoZVxuICAgICAgICAgKiB0aGUgc2Nyb2xsIHBhZGRpbmcgYXMgdXNlcnMgY291bGQgYmUgbW92aW5nXG4gICAgICAgICAqIGZvY3VzIGZyb20gYW4gaW5wdXQgdGhhdCBuZWVkcyBzY3JvbGwgcGFkZGluZ1xuICAgICAgICAgKiB0byBhbiBpbnB1dCB0aGF0IGRvZXMgbm90IG5lZWQgc2Nyb2xsIHBhZGRpbmcuXG4gICAgICAgICAqIElmIHdlIHJlbW92ZSB0aGUgc2Nyb2xsIHBhZGRpbmcgbm93LCB1c2VycyB3aWxsXG4gICAgICAgICAqIHNlZSB0aGUgcGFnZSBqdW1wLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGVuYWJsZVNjcm9sbFBhZGRpbmcgJiYgY29udGVudEVsICE9PSBudWxsKSB7XG4gICAgICAgICAgICBzZXRTY3JvbGxQYWRkaW5nKGNvbnRlbnRFbCwgY3VycmVudFBhZGRpbmcpO1xuICAgICAgICAgICAgc2V0Q2xlYXJTY3JvbGxQYWRkaW5nTGlzdGVuZXIoaW5wdXRFbCwgY29udGVudEVsLCAoKSA9PiAoY3VycmVudFBhZGRpbmcgPSAwKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB0ZW1wb3JhcmlseSBtb3ZlIHRoZSBmb2N1cyB0byB0aGUgZm9jdXMgaG9sZGVyIHNvIHRoZSBicm93c2VyXG4gICAgLy8gZG9lc24ndCBmcmVhayBvdXQgd2hpbGUgaXQncyB0cnlpbmcgdG8gZ2V0IHRoZSBpbnB1dCBpbiBwbGFjZVxuICAgIC8vIGF0IHRoaXMgcG9pbnQgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IHN0aWxsIGRvZXMgbm90IGhhdmUgZm9jdXNcbiAgICByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCB0cnVlLCBzY3JvbGxEYXRhLmlucHV0U2FmZVksIGRpc2FibGVDbG9uZWRJbnB1dCk7XG4gICAgc2V0TWFudWFsRm9jdXMoaW5wdXRFbCk7XG4gICAgLyoqXG4gICAgICogUmVsb2NhdGluZy9Gb2N1c2luZyBpbnB1dCBjYXVzZXMgdGhlXG4gICAgICogY2xpY2sgZXZlbnQgdG8gYmUgY2FuY2VsbGVkLCBzb1xuICAgICAqIG1hbnVhbGx5IGZpcmUgb25lIGhlcmUuXG4gICAgICovXG4gICAgcmFmKCgpID0+IGNvbXBvbmVudEVsLmNsaWNrKCkpO1xuICAgIC8qKlxuICAgICAqIElmIGVuYWJsZWQsIHdlIGNhbiBhZGQgc2Nyb2xsIHBhZGRpbmcgdG9cbiAgICAgKiB0aGUgYm90dG9tIG9mIHRoZSBjb250ZW50IHNvIHRoYXQgc2Nyb2xsIGFzc2lzdFxuICAgICAqIGhhcyBlbm91Z2ggcm9vbSB0byBzY3JvbGwgdGhlIGlucHV0IGFib3ZlXG4gICAgICogdGhlIGtleWJvYXJkLlxuICAgICAqL1xuICAgIGlmIChlbmFibGVTY3JvbGxQYWRkaW5nICYmIGNvbnRlbnRFbCkge1xuICAgICAgICBjdXJyZW50UGFkZGluZyA9IHNjcm9sbERhdGEuc2Nyb2xsUGFkZGluZztcbiAgICAgICAgc2V0U2Nyb2xsUGFkZGluZyhjb250ZW50RWwsIGN1cnJlbnRQYWRkaW5nKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxldCBzY3JvbGxDb250ZW50VGltZW91dDtcbiAgICAgICAgY29uc3Qgc2Nyb2xsQ29udGVudCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIGNsZWFuIHVwIGxpc3RlbmVycyBhbmQgdGltZW91dHNcbiAgICAgICAgICAgIGlmIChzY3JvbGxDb250ZW50VGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbENvbnRlbnRUaW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgICAgICAgICAgLy8gc2Nyb2xsIHRoZSBpbnB1dCBpbnRvIHBsYWNlXG4gICAgICAgICAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2Nyb2xsQnlQb2ludChjb250ZW50RWwsIDAsIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50LCBzY3JvbGxEYXRhLnNjcm9sbER1cmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoZSBzY3JvbGwgdmlldyBpcyBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBub3dcbiAgICAgICAgICAgIC8vIGdpdmUgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IGZvY3VzXG4gICAgICAgICAgICByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBmYWxzZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZKTtcbiAgICAgICAgICAgIC8vIGVuc3VyZSB0aGlzIGlzIHRoZSBmb2N1c2VkIGlucHV0XG4gICAgICAgICAgICBzZXRNYW51YWxGb2N1cyhpbnB1dEVsKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2hlbiB0aGUgaW5wdXQgaXMgYWJvdXQgdG8gYmUgYmx1cnJlZFxuICAgICAgICAgICAgICogd2Ugc2hvdWxkIHNldCBhIHRpbWVvdXQgdG8gcmVtb3ZlXG4gICAgICAgICAgICAgKiBhbnkgc2Nyb2xsIHBhZGRpbmcuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmIChlbmFibGVTY3JvbGxQYWRkaW5nKSB7XG4gICAgICAgICAgICAgICAgc2V0Q2xlYXJTY3JvbGxQYWRkaW5nTGlzdGVuZXIoaW5wdXRFbCwgY29udGVudEVsLCAoKSA9PiAoY3VycmVudFBhZGRpbmcgPSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICAgICAgICBjb25zdCBzY3JvbGxFbCA9IGF3YWl0IGdldFNjcm9sbEVsZW1lbnQoY29udGVudEVsKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogc2Nyb2xsRGF0YSB3aWxsIG9ubHkgY29uc2lkZXIgdGhlIGFtb3VudCB3ZSBuZWVkXG4gICAgICAgICAgICAgKiB0byBzY3JvbGwgaW4gb3JkZXIgdG8gcHJvcGVybHkgYnJpbmcgdGhlIGlucHV0XG4gICAgICAgICAgICAgKiBpbnRvIHZpZXcuIEl0IHdpbGwgbm90IGNvbnNpZGVyIHRoZSBhbW91bnRcbiAgICAgICAgICAgICAqIHdlIGNhbiBzY3JvbGwgaW4gdGhlIGNvbnRlbnQgZWxlbWVudC5cbiAgICAgICAgICAgICAqIEFzIGEgcmVzdWx0LCBzY3JvbGxEYXRhIG1heSByZXF1ZXN0IGEgZ3JlYXRlclxuICAgICAgICAgICAgICogc2Nyb2xsIHBvc2l0aW9uIHRoYW4gaXMgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICAgICAgICogaW4gdGhlIERPTS4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgICogd2FpdCBmb3IgdGhlIHdlYnZpZXcgdG8gcmVzaXplL3RoZSBrZXlib2FyZFxuICAgICAgICAgICAgICogdG8gc2hvdyBpbiBvcmRlciBmb3IgYWRkaXRpb25hbCBzY3JvbGxcbiAgICAgICAgICAgICAqIGJhbmR3aWR0aCB0byBiZWNvbWUgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCB0b3RhbFNjcm9sbEFtb3VudCA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodCAtIHNjcm9sbEVsLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGlmICh3YWl0Rm9yUmVzaXplICYmIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50ID4gdG90YWxTY3JvbGxBbW91bnQgLSBzY3JvbGxFbC5zY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBPbiBpT1MgZGV2aWNlcywgdGhlIHN5c3RlbSB3aWxsIHNob3cgYSBcIlBhc3N3b3Jkc1wiIGJhciBhYm92ZSB0aGUga2V5Ym9hcmRcbiAgICAgICAgICAgICAgICAgKiBhZnRlciB0aGUgaW5pdGlhbCBrZXlib2FyZCBpcyBzaG93bi4gVGhpcyBwcmV2ZW50cyB0aGUgd2VidmlldyBmcm9tIHJlc2l6aW5nXG4gICAgICAgICAgICAgICAgICogdW50aWwgdGhlIFwiUGFzc3dvcmRzXCIgYmFyIGlzIHNob3duLCBzbyB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoYXQgdG8gaGFwcGVuIGZpcnN0LlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dEVsLnR5cGUgPT09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIDUwcHggdG8gYWNjb3VudCBmb3IgdGhlIFwiUGFzc3dvcmRzXCIgYmFyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50ICs9IFNDUk9MTF9BTU9VTlRfUEFERElORztcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgZmlyZSBpbiAyIGluc3RhbmNlczpcbiAgICAgICAgICAgICAgICAgKiAxLiBUaGUgYXBwIGlzIHZlcnkgc2xvdy5cbiAgICAgICAgICAgICAgICAgKiAyLiBUaGUgYXBwIGlzIHJ1bm5pbmcgaW4gYSBicm93c2VyIG9uIGFuIG9sZCBPU1xuICAgICAgICAgICAgICAgICAqIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBJb25pYyBLZXlib2FyZCBFdmVudHNcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBzY3JvbGxDb250ZW50VGltZW91dCA9IHNldFRpbWVvdXQoc2Nyb2xsQ29udGVudCwgMTAwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjcm9sbENvbnRlbnQoKTtcbiAgICB9XG59O1xuXG5jb25zdCBJTlBVVF9CTFVSUklORyA9IHRydWU7XG5jb25zdCBzdGFydElucHV0U2hpbXMgPSBhc3luYyAoY29uZmlnLCBwbGF0Zm9ybSkgPT4ge1xuICAgIC8qKlxuICAgICAqIElmIGRvYyBpcyB1bmRlZmluZWQgdGhlbiB3ZSBhcmUgaW4gYW4gU1NSIGVudmlyb25tZW50XG4gICAgICogd2hlcmUgaW5wdXQgc2hpbXMgZG8gbm90IGFwcGx5LlxuICAgICAqL1xuICAgIGlmIChkb2MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlzSU9TID0gcGxhdGZvcm0gPT09ICdpb3MnO1xuICAgIGNvbnN0IGlzQW5kcm9pZCA9IHBsYXRmb3JtID09PSAnYW5kcm9pZCc7XG4gICAgLyoqXG4gICAgICogSGlkZSBDYXJldCBhbmQgSW5wdXQgQmx1cnJpbmcgYXJlIG5lZWRlZCBvbiBpT1MuXG4gICAgICogU2Nyb2xsIEFzc2lzdCBhbmQgU2Nyb2xsIFBhZGRpbmcgYXJlIG5lZWRlZCBvbiBpT1MgYW5kIEFuZHJvaWRcbiAgICAgKiB3aXRoIENocm9tZSB3ZWIgYnJvd3NlciAobm90IENocm9tZSB3ZWJ2aWV3KS5cbiAgICAgKi9cbiAgICBjb25zdCBrZXlib2FyZEhlaWdodCA9IGNvbmZpZy5nZXROdW1iZXIoJ2tleWJvYXJkSGVpZ2h0JywgMjkwKTtcbiAgICBjb25zdCBzY3JvbGxBc3Npc3QgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsQXNzaXN0JywgdHJ1ZSk7XG4gICAgY29uc3QgaGlkZUNhcmV0ID0gY29uZmlnLmdldEJvb2xlYW4oJ2hpZGVDYXJldE9uU2Nyb2xsJywgaXNJT1MpO1xuICAgIC8qKlxuICAgICAqIFRoZSB0ZWFtIGlzIGV2YWx1YXRpbmcgaWYgaW5wdXRCbHVycmluZyBpcyBzdGlsbCBuZWVkZWQuIEFzIGEgcmVzdWx0XG4gICAgICogdGhpcyBmZWF0dXJlIGlzIGRpc2FibGVkIGJ5IGRlZmF1bHQgYXMgb2YgSW9uaWMgOC4wLiBEZXZlbG9wZXJzIGFyZVxuICAgICAqIGFibGUgdG8gcmUtZW5hYmxlIGl0IHRlbXBvcmFyaWx5LiBUaGUgdGVhbSBtYXkgcmVtb3ZlIHRoaXMgdXRpbGl0eVxuICAgICAqIGlmIGl0IGlzIGRldGVybWluZWQgdGhhdCBkb2luZyBzbyB3b3VsZCBub3QgYnJpbmcgYW55IGFkdmVyc2Ugc2lkZSBlZmZlY3RzLlxuICAgICAqIFRPRE8gRlctNjAxNCByZW1vdmUgaW5wdXQgYmx1cnJpbmcgdXRpbGl0eSAoaW5jbHVkaW5nIGltcGxlbWVudGF0aW9uKVxuICAgICAqL1xuICAgIGNvbnN0IGlucHV0Qmx1cnJpbmcgPSBjb25maWcuZ2V0Qm9vbGVhbignaW5wdXRCbHVycmluZycsIGZhbHNlKTtcbiAgICBjb25zdCBzY3JvbGxQYWRkaW5nID0gY29uZmlnLmdldEJvb2xlYW4oJ3Njcm9sbFBhZGRpbmcnLCB0cnVlKTtcbiAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdpb24taW5wdXQsIGlvbi10ZXh0YXJlYScpKTtcbiAgICBjb25zdCBoaWRlQ2FyZXRNYXAgPSBuZXcgV2Vha01hcCgpO1xuICAgIGNvbnN0IHNjcm9sbEFzc2lzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgLyoqXG4gICAgICogR3JhYiB0aGUgbmF0aXZlIGtleWJvYXJkIHJlc2l6ZSBjb25maWd1cmF0aW9uXG4gICAgICogYW5kIHBhc3MgaXQgdG8gc2Nyb2xsIGFzc2lzdC4gU2Nyb2xsIGFzc2lzdCByZXF1aXJlc1xuICAgICAqIHRoYXQgd2UgYWRqdXN0IHRoZSBpbnB1dCByaWdodCBiZWZvcmUgdGhlIGlucHV0XG4gICAgICogaXMgYWJvdXQgdG8gYmUgZm9jdXNlZC4gSWYgd2UgY2FsbGVkIGBLZXlib2FyZC5nZXRSZXNpemVNb2RlYFxuICAgICAqIG9uIGZvY3VzaW4gaW4gc2Nyb2xsIGFzc2lzdCwgd2UgY291bGQgcG90ZW50aWFsbHkgYWRqdXN0IHRoZVxuICAgICAqIGlucHV0IHRvbyBsYXRlIHNpbmNlIHRoaXMgY2FsbCBpcyBhc3luYy5cbiAgICAgKi9cbiAgICBjb25zdCBrZXlib2FyZFJlc2l6ZU1vZGUgPSBhd2FpdCBLZXlib2FyZC5nZXRSZXNpemVNb2RlKCk7XG4gICAgY29uc3QgcmVnaXN0ZXJJbnB1dCA9IGFzeW5jIChjb21wb25lbnRFbCkgPT4ge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gY29tcG9uZW50T25SZWFkeShjb21wb25lbnRFbCwgcmVzb2x2ZSkpO1xuICAgICAgICBjb25zdCBpbnB1dFJvb3QgPSBjb21wb25lbnRFbC5zaGFkb3dSb290IHx8IGNvbXBvbmVudEVsO1xuICAgICAgICBjb25zdCBpbnB1dEVsID0gaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgfHwgaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XG4gICAgICAgIGNvbnN0IHNjcm9sbEVsID0gZmluZENsb3Nlc3RJb25Db250ZW50KGNvbXBvbmVudEVsKTtcbiAgICAgICAgY29uc3QgZm9vdGVyRWwgPSAhc2Nyb2xsRWwgPyBjb21wb25lbnRFbC5jbG9zZXN0KCdpb24tZm9vdGVyJykgOiBudWxsO1xuICAgICAgICBpZiAoIWlucHV0RWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFzY3JvbGxFbCAmJiBoaWRlQ2FyZXQgJiYgIWhpZGVDYXJldE1hcC5oYXMoY29tcG9uZW50RWwpKSB7XG4gICAgICAgICAgICBjb25zdCBybUZuID0gZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsKTtcbiAgICAgICAgICAgIGhpZGVDYXJldE1hcC5zZXQoY29tcG9uZW50RWwsIHJtRm4pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkYXRlL2RhdGV0aW1lLWxvY2FsZSBpbnB1dHMgb24gbW9iaWxlIGRldmljZXMgc2hvdyBkYXRlIHBpY2tlclxuICAgICAgICAgKiBvdmVybGF5cyBpbnN0ZWFkIG9mIGtleWJvYXJkcy4gQXMgYSByZXN1bHQsIHNjcm9sbCBhc3Npc3QgaXNcbiAgICAgICAgICogbm90IG5lZWRlZC4gVGhpcyBhbHNvIHdvcmtzIGFyb3VuZCBhIGJ1ZyBpbiBpT1MgPDE2IHdoZXJlXG4gICAgICAgICAqIHNjcm9sbCBhc3Npc3QgY2F1c2VzIHRoZSBicm93c2VyIHRvIGxvY2sgdXAuIFNlZSBGVy0xOTk3LlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgaXNEYXRlSW5wdXQgPSBpbnB1dEVsLnR5cGUgPT09ICdkYXRlJyB8fCBpbnB1dEVsLnR5cGUgPT09ICdkYXRldGltZS1sb2NhbCc7XG4gICAgICAgIGlmICghaXNEYXRlSW5wdXQgJiZcbiAgICAgICAgICAgICghIXNjcm9sbEVsIHx8ICEhZm9vdGVyRWwpICYmXG4gICAgICAgICAgICBzY3JvbGxBc3Npc3QgJiZcbiAgICAgICAgICAgICFzY3JvbGxBc3Npc3RNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZVNjcm9sbEFzc2lzdChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2Nyb2xsRWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgc2Nyb2xsUGFkZGluZywga2V5Ym9hcmRSZXNpemVNb2RlLCBpc0FuZHJvaWQpO1xuICAgICAgICAgICAgc2Nyb2xsQXNzaXN0TWFwLnNldChjb21wb25lbnRFbCwgcm1Gbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHVucmVnaXN0ZXJJbnB1dCA9IChjb21wb25lbnRFbCkgPT4ge1xuICAgICAgICBpZiAoaGlkZUNhcmV0KSB7XG4gICAgICAgICAgICBjb25zdCBmbiA9IGhpZGVDYXJldE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgICAgICAgaWYgKGZuKSB7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhpZGVDYXJldE1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY3JvbGxBc3Npc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGZuID0gc2Nyb2xsQXNzaXN0TWFwLmdldChjb21wb25lbnRFbCk7XG4gICAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Nyb2xsQXNzaXN0TWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmIChpbnB1dEJsdXJyaW5nICYmIElOUFVUX0JMVVJSSU5HKSB7XG4gICAgICAgIGVuYWJsZUlucHV0Qmx1cnJpbmcoKTtcbiAgICB9XG4gICAgLy8gSW5wdXQgbWlnaHQgYmUgYWxyZWFkeSBsb2FkZWQgaW4gdGhlIERPTSBiZWZvcmUgaW9uLWRldmljZS1oYWNrcyBkaWQuXG4gICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBuZWVkIHRvIGxvb2sgZm9yIGFsbCBvZiB0aGUgaW5wdXRzIG5vdCByZWdpc3RlcmVkIHlldFxuICAgIC8vIGFuZCByZWdpc3RlciB0aGVtLlxuICAgIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRzKSB7XG4gICAgICAgIHJlZ2lzdGVySW5wdXQoaW5wdXQpO1xuICAgIH1cbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignaW9uSW5wdXREaWRMb2FkJywgKGV2KSA9PiB7XG4gICAgICAgIHJlZ2lzdGVySW5wdXQoZXYuZGV0YWlsKTtcbiAgICB9KTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignaW9uSW5wdXREaWRVbmxvYWQnLCAoZXYpID0+IHtcbiAgICAgICAgdW5yZWdpc3RlcklucHV0KGV2LmRldGFpbCk7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgeyBzdGFydElucHV0U2hpbXMgfTtcbiJdLCJuYW1lcyI6WyJjbG9uZU1hcCIsInJlbG9jYXRlSW5wdXQiLCJjb21wb25lbnRFbCIsImlucHV0RWwiLCJzaG91bGRSZWxvY2F0ZSIsImlucHV0UmVsYXRpdmVZIiwiZGlzYWJsZWRDbG9uZWRJbnB1dCIsImFkZENsb25lIiwicmVtb3ZlQ2xvbmUiLCJpc0ZvY3VzZWQiLCJpbnB1dCIsInBhcmVudEVsIiwiY2xvbmVkRWwiLCJ0eCIsImNsb25lIiwiU0NST0xMX0FNT1VOVF9QQURESU5HIiwiZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwiLCJzY3JvbGxFbCIsInNjcm9sbEhpZGVDYXJldCIsInNob3VsZEhpZGVDYXJldCIsIm9uQmx1ciIsImhpZGVDYXJldCIsInNob3dDYXJldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiU0tJUF9TRUxFQ1RPUiIsImVuYWJsZUlucHV0Qmx1cnJpbmciLCJmb2N1c2VkIiwiZGlkU2Nyb2xsIiwiZG9jIiwib25TY3JvbGwiLCJvbkZvY3VzaW4iLCJvblRvdWNoZW5kIiwiZXYiLCJhY3RpdmUiLCJ0YXBwZWQiLCJTQ1JPTExfQVNTSVNUX1NQRUVEIiwiZ2V0U2Nyb2xsRGF0YSIsImNvbnRlbnRFbCIsImtleWJvYXJkSGVpZ2h0IiwicGxhdGZvcm1IZWlnaHQiLCJfYSIsIml0ZW1FbCIsImNhbGNTY3JvbGxEYXRhIiwiaW5wdXRSZWN0IiwiY29udGVudFJlY3QiLCJpbnB1dFRvcCIsImlucHV0Qm90dG9tIiwidmlzaWJsZUFyZWFUb3AiLCJ2aXNpYmxlQXJlYUJvdHRvbSIsInNhZmVBcmVhVG9wIiwiZGlzdGFuY2VUb0JvdHRvbSIsImRpc3RhbmNlVG9Ub3AiLCJkZXNpcmVkU2Nyb2xsQW1vdW50Iiwic2Nyb2xsQW1vdW50IiwiZHVyYXRpb24iLCJzY3JvbGxEdXJhdGlvbiIsIlBBRERJTkdfVElNRVJfS0VZIiwic2V0U2Nyb2xsUGFkZGluZyIsInBhZGRpbmdBbW91bnQiLCJjbGVhckNhbGxiYWNrIiwidGltZXIiLCJzZXRDbGVhclNjcm9sbFBhZGRpbmdMaXN0ZW5lciIsImRvbmVDYWxsYmFjayIsImNsZWFyU2Nyb2xsUGFkZGluZyIsImN1cnJlbnRQYWRkaW5nIiwiU0tJUF9TQ1JPTExfQVNTSVNUIiwiZW5hYmxlU2Nyb2xsQXNzaXN0IiwiZm9vdGVyRWwiLCJlbmFibGVTY3JvbGxQYWRkaW5nIiwia2V5Ym9hcmRSZXNpemUiLCJkaXNhYmxlQ2xvbmVkSW5wdXQiLCJhZGRTY3JvbGxQYWRkaW5nIiwiS2V5Ym9hcmRSZXNpemUiLCJoYXNLZXlib2FyZEJlZW5QcmVzZW50ZWRGb3JUZXh0RmllbGQiLCJ3aW4iLCJrZXlib2FyZFNob3ciLCJqc1NldEZvY3VzIiwiZm9jdXNPdXQiLCJmb2N1c0luIiwic2V0TWFudWFsRm9jdXMiLCJlbCIsImlucHV0SWQiLCJsYWJlbCIsImFjdGl2ZUVsTGFiZWwiLCJ3YWl0Rm9yUmVzaXplIiwic2Nyb2xsRGF0YSIsInJhZiIsInNjcm9sbENvbnRlbnRUaW1lb3V0Iiwic2Nyb2xsQ29udGVudCIsImRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lciIsInNjcm9sbEJ5UG9pbnQiLCJnZXRTY3JvbGxFbGVtZW50IiwidG90YWxTY3JvbGxBbW91bnQiLCJJTlBVVF9CTFVSUklORyIsInN0YXJ0SW5wdXRTaGltcyIsImNvbmZpZyIsInBsYXRmb3JtIiwiaXNJT1MiLCJpc0FuZHJvaWQiLCJzY3JvbGxBc3Npc3QiLCJpbnB1dEJsdXJyaW5nIiwic2Nyb2xsUGFkZGluZyIsImlucHV0cyIsImhpZGVDYXJldE1hcCIsInNjcm9sbEFzc2lzdE1hcCIsImtleWJvYXJkUmVzaXplTW9kZSIsIktleWJvYXJkIiwicmVnaXN0ZXJJbnB1dCIsInJlc29sdmUiLCJjb21wb25lbnRPblJlYWR5IiwiaW5wdXRSb290IiwiZmluZENsb3Nlc3RJb25Db250ZW50Iiwicm1GbiIsInVucmVnaXN0ZXJJbnB1dCIsImZuIl0sIm1hcHBpbmdzIjoiOEdBQUE7QUFBQTtBQUFBLEdBUUEsTUFBTUEsRUFBVyxJQUFJLFFBQ2ZDLEVBQWdCLENBQUNDLEVBQWFDLEVBQVNDLEVBQWdCQyxFQUFpQixFQUFHQyxFQUFzQixLQUFVLENBQ3pHTixFQUFTLElBQUlFLENBQVcsSUFBTUUsSUFHOUJBLEVBQ0FHLEVBQVNMLEVBQWFDLEVBQVNFLEVBQWdCQyxDQUFtQixFQUdsRUUsRUFBWU4sRUFBYUMsQ0FBTyxFQUV4QyxFQUNNTSxFQUFhQyxHQVVSQSxJQUFVQSxFQUFNLFlBQVcsRUFBRyxjQUVuQ0gsRUFBVyxDQUFDTCxFQUFhQyxFQUFTRSxFQUFnQkMsRUFBc0IsS0FBVSxDQVVwRixNQUFNSyxFQUFXUixFQUFRLFdBRW5CUyxFQUFXVCxFQUFRLFVBQVUsRUFBSyxFQUN4Q1MsRUFBUyxVQUFVLElBQUksY0FBYyxFQUNyQ0EsRUFBUyxTQUFXLEdBYWhCTixJQUNBTSxFQUFTLFNBQVcsSUFF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QUFPLFdBQVcsZ0JBQWlCLEVBQUksRUFDdkRPLEVBQVMsTUFBTSxLQUFLMUUsRUFBSSxpQkFBaUIseUJBQXlCLENBQUMsRUFDbkUyRSxFQUFlLElBQUksUUFDbkJDLEVBQWtCLElBQUksUUFTdEJDLEVBQXFCLE1BQU1DLEVBQVMsY0FBYSxFQUNqREMsRUFBZ0IsTUFBTzFHLEdBQWdCLENBQ3pDLE1BQU0sSUFBSSxRQUFTMkcsR0FBWUMsRUFBaUI1RyxFQUFhMkcsQ0FBTyxDQUFDLEVBQ3JFLE1BQU1FLEVBQVk3RyxFQUFZLFlBQWNBLEVBQ3RDQyxFQUFVNEcsRUFBVSxjQUFjLE9BQU8sR0FBS0EsRUFBVSxjQUFjLFVBQVUsRUFDaEY5RixFQUFXK0YsRUFBc0I5RyxDQUFXLEVBQzVDa0UsRUFBWW5ELEVBQStDLEtBQXBDZixFQUFZLFFBQVEsWUFBWSxFQUM3RCxHQUFJLENBQUNDLEVBQ0QsT0FFSixHQUFNYyxHQUFZSSxHQUFhLENBQUNtRixFQUFhLElBQUl0RyxDQUFXLEVBQUcsQ0FDM0QsTUFBTStHLEVBQU9qRyxFQUF3QmQsRUFBYUMsRUFBU2MsQ0FBUSxFQUNuRXVGLEVBQWEsSUFBSXRHLEVBQWErRyxDQUFJLENBQ3RDLENBUUEsR0FBSSxFQURnQjlHLEVBQVEsT0FBUyxRQUFVQSxFQUFRLE9BQVMsb0JBRXpEYyxHQUFjbUQsSUFDakJnQyxHQUNBLENBQUNLLEVBQWdCLElBQUl2RyxDQUFXLEVBQUcsQ0FDbkMsTUFBTStHLEVBQU85QyxFQUFtQmpFLEVBQWFDLEVBQVNjLEVBQVVtRCxFQUFVN0IsRUFBZ0IrRCxFQUFlSSxFQUFvQlAsQ0FBUyxFQUN0SU0sRUFBZ0IsSUFBSXZHLEVBQWErRyxDQUFJLENBQ3pDLENBQ0osRUFDTUMsRUFBbUJoSCxHQUFnQixDQUNyQyxHQUFJbUIsRUFBVyxDQUNYLE1BQU04RixFQUFLWCxFQUFhLElBQUl0RyxDQUFXLEVBQ25DaUgsR0FDQUEsRUFBRSxFQUVOWCxFQUFhLE9BQU90RyxDQUFXLENBQ25DLENBQ0EsR0FBSWtHLEVBQWMsQ0FDZCxNQUFNZSxFQUFLVixFQUFnQixJQUFJdkcsQ0FBVyxFQUN0Q2lILEdBQ0FBLEVBQUUsRUFFTlYsRUFBZ0IsT0FBT3ZHLENBQVcsQ0FDdEMsQ0FDSixFQUNJbUcsR0FBaUJQLEdBQ2pCcEUsRUFBbUIsRUFLdkIsVUFBV2hCLEtBQVM2RixFQUNoQkssRUFBY2xHLENBQUssRUFFdkJtQixFQUFJLGlCQUFpQixrQkFBb0JJLEdBQU8sQ0FDNUMyRSxFQUFjM0UsRUFBRyxNQUFNLENBQzNCLENBQUMsRUFDREosRUFBSSxpQkFBaUIsb0JBQXNCSSxHQUFPLENBQzlDaUYsRUFBZ0JqRixFQUFHLE1BQU0sQ0FDN0IsQ0FBQyxDQUNMIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzBdfQ==
